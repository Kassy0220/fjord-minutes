<div class="mx-auto w-full">
  <div class="mx-auto">
    <%= render 'courses/tabs/course_tab', active_tab: @course, resource: Member %>

    <h2 class="mb-8 text-2xl font-bold text-center"><%= "#{@course.name}のメンバー" %></h2>

    <% if admin_signed_in? %>
      <% active_tab = params[:status] ? params[:status] : 'active' %>
      <%= render 'status_tab', course: @course, active_tab: active_tab %>
    <% end %>

    <div>
      <ul class="list-disc list-inside">
        <% @members.each do |member| %>
          <li class="mb-4" data-member="<%= member.id %>">
            <%= image_tag member.avatar_url, class: 'w-12 h-12 inline-block' %>
            <%= link_to "#{member.name}", member, class: "py-3 inline-block" %>
            <% if admin_signed_in? && !member.hibernated? %>
              <%= content_tag :div, class: 'hibernation_button inline-block', data: {member_id: member.id, member_name: member.name}.to_json do %><% end %>
            <% end %>
            <% if member.completed? %>
              <p class="mt-2 text-sm">
                <svg class="w-6 h-6 text-yellow-400 inline-block" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8.032 12 1.984 1.984 4.96-4.96m4.55 5.272.893-.893a1.984 1.984 0 0 0 0-2.806l-.893-.893a1.984 1.984 0 0 1-.581-1.403V7.04a1.984 1.984 0 0 0-1.984-1.984h-1.262a1.983 1.983 0 0 1-1.403-.581l-.893-.893a1.984 1.984 0 0 0-2.806 0l-.893.893a1.984 1.984 0 0 1-1.403.581H7.04A1.984 1.984 0 0 0 5.055 7.04v1.262c0 .527-.209 1.031-.581 1.403l-.893.893a1.984 1.984 0 0 0 0 2.806l.893.893c.372.372.581.876.581 1.403v1.262a1.984 1.984 0 0 0 1.984 1.984h1.262c.527 0 1.031.209 1.403.581l.893.893a1.984 1.984 0 0 0 2.806 0l.893-.893a1.985 1.985 0 0 1 1.403-.581h1.262a1.984 1.984 0 0 0 1.984-1.984V15.7c0-.527.209-1.031.581-1.403Z" />
                </svg>
                <span class="text-yellow-400 align-middle"><%= member.completed_at.strftime('%Y/%m/%d') %>に修了</span>
              </p>
            <% elsif member.hibernated? %>
              <p class="mt-2 text-sm"><%= member.hibernations.last.created_at.strftime('%Y/%m/%d') %>から休会</p>
            <% end %>
            <%= content_tag :div, class: 'recent_attendances mt-4', data: {attendances: member.all_attendances.pop(12)}.to_json do %><% end %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
