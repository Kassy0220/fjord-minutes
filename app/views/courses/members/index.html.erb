<div class="mx-auto w-full">
  <div class="mx-auto">
    <%= render 'courses/tabs/course_tab', active_tab: @course, resource: Member %>

    <h2 class="mb-8 text-2xl font-bold text-center"><%= "#{@course.name}のメンバー" %></h2>

    <% if admin_signed_in? %>
      <% active_tab = params[:status] ? params[:status] : 'active' %>
      <%= render 'status_tab', course: @course, active_tab: active_tab %>
    <% end %>

    <div>
      <ul class="list-disc list-inside">
        <% @members.each do |member| %>
          <li class="mb-4" data-member="<%= member.id %>">
            <%= image_tag member.avatar_url, class: member.hibernated? ? 'inactive_member_icon' : 'member_icon' %>
            <%= link_to "#{member.name}", member, class: "py-3 inline-block" %>
            <% if admin_signed_in? && !member.hibernated? %>
              <%= content_tag :div, class: 'hibernation_button inline-block', data: {member_id: member.id, member_name: member.name}.to_json do %><% end %>
            <% end %>
            <% if member.hibernated? %>
              <p class="mt-2 text-sm"><%= member.hibernations.last.created_at.strftime('%Y/%m/%d') %>から休会</p>
            <% end %>
            <%= content_tag :div, class: 'recent_attendances mt-4', data: {attendances: member.all_attendances.pop(12)}.to_json do %><% end %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
